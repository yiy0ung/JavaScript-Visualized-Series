# âœ¨â™»ï¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹œê°í™”: ì´ë²¤íŠ¸ ë£¨í”„ Event Loop

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ëª¨ë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œìë“¤ì´ ì–´ë–»ê²Œ í•´ì„œë“  ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ê²ƒ ì¤‘ í•˜ë‚˜ì§€ë§Œ ì²˜ìŒì—ëŠ” ì´í•´í•˜ê¸° ì¡°ê¸ˆ í˜¼ë€ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ì‹œê°ì ìœ¼ë¡œ í•™ìŠµí•˜ê¸° ë•Œë¬¸ì— gifë¥¼ í†µí•œ ì‹œê°ì ì¸ ë°©ë²•ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ì—ê²Œ ì„¤ëª…í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. (2019ë…„ì´ì§€ë§Œ ì–´ì§¸ì„œì¸ì§€ gifëŠ” ì—¬ì „íˆ í”½ì…€í™” ë˜ì–´ìˆê³  íë¦¿í•˜ë„¤ìš”....)

í•˜ì§€ë§Œ ë¨¼ì €, ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë¬´ì—‡ì¸ì§€ ê·¸ë¦¬ê³  ì™œ ê´€ë¦¬í•´ì£¼ì–´ì•¼ í•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ì“°ë ˆë“œë¼ì„œ í•œ ë²ˆì— í•œê°€ì§€ ì¼ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³´í†µì€ í° ë¬¸ì œê°€ ì•„ë‹ˆì§€ë§Œ, ì—¬ëŸ¬ë¶„ì´ í•˜ë‚˜ì— 30ì´ˆê°€ ê±¸ë¦¬ëŠ” ì¼ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”... ìš°ë¦¬ëŠ” 30ì´ˆ ë™ì•ˆ ê¸°ë‹¤ë¦° í›„ì—ì•¼ ë‹¤ë¥¸ ì¼ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¸Œë¼ìš°ì €ì˜ ë©”ì¸ ì“°ë ˆë“œë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ëª¨ë“  UIê°€ ë©ˆì¶˜ë‹¤.) ğŸ˜¬ í•˜ì§€ë§Œ 2019ë…„ì— ì‚´ê³  ìˆëŠ” ìš°ë¦¬ëŠ” ëŠë¦¬ê³  ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ì›¹ì‚¬ì´íŠ¸ë¥¼ ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ìš´ ì¢‹ê²Œë„, ë¸Œë¼ìš°ì €ëŠ” ìš°ë¦¬ì—ê²Œ ì›¹ APIì™€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ ì œê³µí•˜ì§€ ì•ŠëŠ” ëª‡ ê°€ì§€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” DOM API, `setTimeout`, HTTP ìš”ì²­ ë“±ë“±ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ê°€ ë¸”ë¡í‚¹ í˜„ìƒì„ í•´ê²°í•˜ê³  ë¹„ë™ê¸°ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤ ğŸš€

ìš°ë¦¬ê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ì½œ ìŠ¤íƒì´ë¼ê³  ë¶ˆë¦¬ëŠ” ê³³ì— ì¶”ê°€ë©ë‹ˆë‹¤. ì½œ ìŠ¤íƒì€ ë¸Œë¼ìš°ì €ì˜ íŠ¹ì • ë¶€ë¶„ì´ ì•„ë‹ˆë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì˜ í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. ë˜í•œ ìŠ¤íƒ ìë£Œêµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— FILO(First in, Last Out)ë¥¼ ë”°ë¦…ë‹ˆë‹¤. ë”°ë¼ì„œ í•¨ìˆ˜ê°€ ê°’ì„ ë°˜í™˜í•  ë•Œ, ìŠ¤íƒì˜ ë§¨ ìœ„ì—ì„œ ë¶€í„° ë‚˜ì˜µë‹ˆë‹¤ ğŸ‘‹

![first-event-loop](./gifs/eventLoop1.gif)

í˜¸ì¶œëœ í•¨ìˆ˜ëŠ” `setTimeout` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. `setTimeout`ì€ ë©”ì¸ ì“°ë ˆë“œì˜ ë¸”ë¡í‚¹ ì—†ì´ ì‘ì—…ì´ ë”œë ˆì´ ë  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì›¹ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ setTimeout í•¨ìˆ˜ë¡œ ì „ë‹¬í–ˆë˜ ì½œë°± í•¨ìˆ˜(í™”ì‚´í‘œ í•¨ìˆ˜), `() =>ã€€{ return â€˜Heyâ€™ }` ëŠ” ì›¹ APIì— ì¶”ê°€ë©ë‹ˆë‹¤. ì¶”ê°€ë˜ëŠ” ë™ì•ˆ, setTimeout í•¨ìˆ˜ ê·¸ë¦¬ê³  í˜¸ì¶œí–ˆë˜ í•¨ìˆ˜ëŠ” ìŠ¤íƒì—ì„œ ë‚˜ì˜¤ê²Œ ë˜ê³  ë‘˜ ë‹¤ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

![second-event-loop](./gifs/eventLoop2.gif)

ì›¹ API ë‚´ë¶€ì—ì„œ, ìš°ë¦¬ê°€ ë‘ ë²ˆì§¸ ì „ë‹¬ì¸ìë¡œ ë„˜ê²¨ì£¼ì—ˆë˜ 1000ms ë™ì•ˆ íƒ€ì´ë¨¸ê°€ ì‘ë™í•©ë‹ˆë‹¤. ì½œë°±ì€ ì¦‰ì‹œ ì½œ ìŠ¤íƒì— ì¶”ê°€ë˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ ì— í(queue)ë¼ê³  ë¶ˆë¦¬ëŠ” ê³³ìœ¼ë¡œ ë„˜ê²¨ì§‘ë‹ˆë‹¤.

![third-event-loop](./gifs/eventLoop3.gif)

ì´ê²ƒì€ í˜¼ë€ìŠ¤ëŸ¬ìš´ ë¶€ë¶„ì¼ ìˆ˜ ìˆë‹¤. 1000msëŠ” ì½œë°±í•¨ìˆ˜ê°€ 1000ms ë’¤ì— ì½œìŠ¤íƒ(ê°’ì˜ ë°˜í™˜)ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ 1000ms ë’¤ì— íì— ì¶”ê°€ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œì§€ë§Œ, ì´ íëŠ” í•¨ìˆ˜ê°€ ìì‹ ì˜ ì°¨ë¡€ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” íì…ë‹ˆë‹¤.

ì´ì œ ìš°ë¦¬ê°€ ê¸°ë‹¤ë¦¬ë˜ ë¶€ë¶„... ì´ë²¤íŠ¸ ë£¨í”„ê°€ ì‘ë™í•  ë•Œì…ë‹ˆë‹¤. ì´ë²¤íŠ¸ ë£¨í”„ëŠ” íì™€ ì½œìŠ¤íƒê³¼ ì—°ê²°ë©ë‹ˆë‹¤! ë§Œì•½ ì½œìŠ¤íƒì´ ë¹„ì–´ìˆê³  ì´ì „ì— í˜¸ì¶œí•œ ëª¨ë“  í•¨ìˆ˜ê°€ ê°’ì„ ë°˜í™˜í•˜ê³  ìŠ¤íƒì„ ë‚˜ê°”ë‹¤ë©´, íì— ìˆëŠ” ì²« ë²ˆì§¸ ì½œë°±í•¨ìˆ˜ê°€ ì½œìŠ¤íƒì— ì¶”ê°€ë©ë‹ˆë‹¤. ì´ ê²½ìš°ì—, ë‹¤ë¥¸ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë©°. ì´ì „ì— ë„£ì—ˆë˜ ì½œë°±í•¨ìˆ˜ê°€ íì— ì²« ë²ˆì§¸ ì•„ì´í…œì¼ ë•Œ, ì½œìŠ¤íƒëŠ” ë¹„ì–´ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

![fourth-event-loop](./gifs/eventLoop4.gif)

ì½œë°±ì€ ì½œ ìŠ¤íƒì— ì¶”ê°€ë˜ê³ , í˜¸ì¶œëœ ë’¤, ê°’ì„ ë°˜í™˜í•˜ê³  ì½œ ìŠ¤íƒì„ ë¹ ì ¸ë‚˜ê°€ê²Œ ë©ë‹ˆë‹¤.

![fifth-event-loop](./gifs/eventLoop5.gif)

ê¸€ì„ ì½ëŠ” ê²ƒì€ ì¬ë°Œì§€ë§Œ, ì‹¤ì œë¡œ ê³„ì† ë°˜ë³µí•´ì„œ ì‹¤í–‰í•´ë´„ìœ¼ë¡œì¨ ì—¬ëŸ¬ë¶„ì€ ì´ê²ƒì— ìµìˆ™í•´ì§ˆ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤. ì•„ë˜ì˜ ì½”ë“œë¥¼ ì½˜ì†”ì— ë¡œê·¸ë¥¼ ì°ì–´ë‚´ë©´ì„œ í™•ì¸í•´ë³´ì„¸ìš”.

```javascript
const foo = () => console.log("First");
const bar = () => setTimeout(() => console.log("Second"), 500);
const baz = () => console.log("Third");

bar();
foo();
baz();
```

---

ì´í•´ê°€ ëë‚˜ìš”? ìš°ë¦¬ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ë¬´ì—‡ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ë¹ ë¥´ê²Œ ì •ë¦¬í•´ë´…ì‹œë‹¤.

![final-event-loop](./gifs/eventLoopEnd.gif)

1. bar í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. barí•¨ìˆ˜ëŠ” `setTimeout` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

2. setTimeout í•¨ìˆ˜ì˜ ì½œë°±ì€ ì›¹ APIì— ì¶”ê°€ëœë‹¤. setTimeout í•¨ìˆ˜ì™€ bar í•¨ìˆ˜ëŠ” ì½œìŠ¤íƒì—ì„œ ë‚˜ì˜¤ê²Œ ëœë‹¤.

3. íƒ€ì´ë¨¸ê°€ ì‘ë™í•˜ê³ , ê·¸ë™ì•ˆì— fooê°€ í˜¸ì¶œë˜ê³  ë¡œê·¸ì— `First`ë¥¼ ì°ëŠ”ë‹¤. fooëŠ” ë°˜í™˜(undifined)ë˜ê³ , ë™ì‹œì— bazê°€ í˜¸ì¶œëœë‹¤, ê·¸ë¦¬ê³  ì½œë°±í•¨ìˆ˜ëŠ” í(queue)ì— ì¶”ê°€ëœë‹¤.

4. bazì— `Third` ë¡œê·¸ê°€ ì°íŒë‹¤. bazê°€ ë°˜í™˜ëœ í›„, ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì½œìŠ¤íƒì´ ë¹„ì–´ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•œë‹¤. í›„ì— setTimeoutì˜ ì½œë°±ì„ ì½œìŠ¤íƒì— ì¶”ê°€í•œë‹¤.

5. `Second`ê°€ ë¡œê·¸ì— ì°íŒë‹¤.


ì´ ê¸€ì„ í†µí•´ ì´ë²¤íŠ¸ ë£¨í”„ê°€ ì¡°ê¸ˆì´ë¼ë„ ì´í•´ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ë§Œ, ì•„ì§ í˜¼ë€ìŠ¤ëŸ½ë”ë¼ë„ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ êµ¬ê¸€ì— ì í•©í•œ ìš©ì–´ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ íŠ¹ì • ì—ëŸ¬/ì‘ë™ì´ ì–´ë””ì„œ ë°œìƒí–ˆëŠ”ì§€ ì´í•´í•˜ëŠ” ê²ƒì´ê³  ê²°êµ­ì—ëŠ” ì˜¬ë°”ë¥¸ ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš° í˜ì´ì§€ë¡œ ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.

> ë³¸ ì‹œë¦¬ì¦ˆì€ [DEV](https://dev.to/) ì— ì˜¬ë¼ì˜¨ [Lydia Hallie](https://github.com/lydiahallie)ì˜ **JavaScript Visualized ì‹œë¦¬ì¦ˆ**ë¥¼ ë²ˆì—­í•œ ê²ƒì…ë‹ˆë‹¤.
>
> - ë²ˆì—­ì— ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ [Pull Request](https://github.com/wlsdud2194/JavaScript-Visualized-Series/pulls)ë¥¼ ì˜¬ë ¤ì£¼ì„¸ìš”.
> - origial author link : [Lydia Hallieì˜ dev.to](https://dev.to/lydiahallie)

